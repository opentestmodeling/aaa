grammar org.opentestmodeling.vstep.Ngt with org.eclipse.xtext.common.Terminals

generate ngt "http://www.opentestmodeling.org/vstep/Ngt"

Model:
	testTargets += (Chain | TestContainer)*;

//
// Node related.
//
TestNode: TestTarget | TestViewpoint;

TestTarget:
	'(' name=STRING ')' stereotype=Stereotype? ;

TestViewpoint:
	'[' name=STRING (',' testItems = StringList?) (',' qualityRisk = QualityRisk?) (',' coverage = STRING?) ']' stereotype=Stereotype?;

Inheritance:
	{Inheritance} '-' stereotype=Stereotype? '-|>';

Relation:
	{Relation} '-' stereotype=Stereotype? '-';

Dependency:
	{Dependency} '-' stereotype=Stereotype? '->';

Chain:
	start = TestNode (connections += NodeConnection)*;

NodeConnection: TargetConnection | ViewpointConnection;

TargetConnection:
	connector = Inheritance target = TestTarget;

ViewpointConnection:
	connector = (Relation | Dependency | Inheritance) target = TestNode;

Stereotype:
	'<<' name=STRING '>>';

StringList:
	'[' (list += STRING_OR_NUMBER ("," list += STRING_OR_NUMBER)) ']';

QualityRisk:
	'importance=' INT ',' 'severity=' INT;

//
// Test container related.
//
TestContainer:
	'container' name=STRING ('{'
		(elements += (TestContainer | TestNode))*
	'}')?;

ContainerConnection:
	connector = (Relation | Dependency) target = TestContainer;

TestContainerChain:
	start = TestContainer (connections += ContainerConnection)*
;
STRING_OR_NUMBER: STRING | INT;
